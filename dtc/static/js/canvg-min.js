(function(){this.canvg=function(j,m,b){if(j==null&&m==null&&b==null){var e=document.querySelectorAll("svg");for(var g=0;g<e.length;g++){var f=e[g];var k=document.createElement("canvas");k.width=f.clientWidth;k.height=f.clientHeight;f.parentNode.insertBefore(k,f);f.parentNode.removeChild(f);var d=document.createElement("div");d.appendChild(f);canvg(k,d.innerHTML)}return}if(typeof j=="string"){j=document.getElementById(j)}if(j.svg!=null){j.svg.stop()}var h=a(b||{});if(!(j.childNodes.length==1&&j.childNodes[0].nodeName=="OBJECT")){j.svg=h}var l=j.getContext("2d");if(typeof(m.documentElement)!="undefined"){h.loadXmlDoc(l,m)}else{if(m.substr(0,1)=="<"){h.loadXml(l,m)}else{h.load(l,m)}}};function a(d){var c={opts:d};c.FRAMERATE=30;c.MAX_VIRTUAL_PIXELS=30000;c.log=function(e){};if(c.opts.log==true&&typeof(console)!="undefined"){c.log=function(e){console.log(e)}}c.init=function(e){var f=0;c.UniqueId=function(){f++;return"canvg"+f};c.Definitions={};c.Styles={};c.Animations=[];c.Images=[];c.ctx=e;c.ViewPort=new (function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(h,g){this.viewPorts.push({width:h,height:g})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(g){if(g!=null&&typeof(g)=="number"){return g}if(g=="x"){return this.width()}if(g=="y"){return this.height()}return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}})};c.init();c.ImagesLoaded=function(){for(var e=0;e<c.Images.length;e++){if(!c.Images[e].loaded){return false}}return true};c.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};c.compressSpaces=function(e){return e.replace(/[\s\r\t\n]+/gm," ")};c.ajax=function(f){var e;if(window.XMLHttpRequest){e=new XMLHttpRequest()}else{e=new ActiveXObject("Microsoft.XMLHTTP")}if(e){e.open("GET",f,false);e.send(null);return e.responseText}return null};c.parseXml=function(e){if(typeof(Windows)!="undefined"&&typeof(Windows.Data)!="undefined"&&typeof(Windows.Data.Xml)!="undefined"){var g=new Windows.Data.Xml.Dom.XmlDocument();var f=new Windows.Data.Xml.Dom.XmlLoadSettings();f.prohibitDtd=false;g.loadXml(e,f);return g}else{if(window.DOMParser){var h=new DOMParser();return h.parseFromString(e,"text/xml")}else{e=e.replace(/<!DOCTYPE svg[^>]*>/,"");var g=new ActiveXObject("Microsoft.XMLDOM");g.async="false";g.loadXML(e);return g}}};c.Property=function(e,f){this.name=e;this.value=f};c.Property.prototype.getValue=function(){return this.value};c.Property.prototype.hasValue=function(){return(this.value!=null&&this.value!=="")};c.Property.prototype.numValue=function(){if(!this.hasValue()){return 0}var e=parseFloat(this.value);if((this.value+"").match(/%$/)){e=e/100}return e};c.Property.prototype.valueOrDefault=function(e){if(this.hasValue()){return this.value}return e};c.Property.prototype.numValueOrDefault=function(e){if(this.hasValue()){return this.numValue()}return e};c.Property.prototype.addOpacity=function(g){var f=this.value;if(g.value!=null&&g.value!=""&&typeof(this.value)=="string"){var e=new RGBColor(this.value);if(e.ok){f="rgba("+e.r+", "+e.g+", "+e.b+", "+g.numValue()+")"}}return new c.Property(this.name,f)};c.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)'"]+)/);if(e){e=e[1]}if(!e){e=this.value}return c.Definitions[e]};c.Property.prototype.isUrlDefinition=function(){return this.value.indexOf("url(")==0};c.Property.prototype.getFillStyleDefinition=function(j,h){var f=this.getDefinition();if(f!=null&&f.createGradient){return f.createGradient(c.ctx,j,h)}if(f!=null&&f.createPattern){if(f.getHrefAttribute().hasValue()){var g=f.attribute("patternTransform");f=f.getHrefAttribute().getDefinition();if(g.hasValue()){f.attribute("patternTransform",true).value=g.value}}return f.createPattern(c.ctx,j)}return null};c.Property.prototype.getDPI=function(e){return 96};c.Property.prototype.getEM=function(g){var e=12;var f=new c.Property("fontSize",c.Font.Parse(c.ctx.font).fontSize);if(f.hasValue()){e=f.toPixels(g)}return e};c.Property.prototype.getUnits=function(){var e=this.value+"";return e.replace(/[0-9\.\-]/g,"")};c.Property.prototype.toPixels=function(g,e){if(!this.hasValue()){return 0}var f=this.value+"";if(f.match(/em$/)){return this.numValue()*this.getEM(g)}if(f.match(/ex$/)){return this.numValue()*this.getEM(g)/2}if(f.match(/px$/)){return this.numValue()}if(f.match(/pt$/)){return this.numValue()*this.getDPI(g)*(1/72)}if(f.match(/pc$/)){return this.numValue()*15}if(f.match(/cm$/)){return this.numValue()*this.getDPI(g)/2.54}if(f.match(/mm$/)){return this.numValue()*this.getDPI(g)/25.4}if(f.match(/in$/)){return this.numValue()*this.getDPI(g)}if(f.match(/%$/)){return this.numValue()*c.ViewPort.ComputeSize(g)}var h=this.numValue();if(e&&h<1){return h*c.ViewPort.ComputeSize(g)}return h};c.Property.prototype.toMilliseconds=function(){if(!this.hasValue()){return 0}var e=this.value+"";if(e.match(/s$/)){return this.numValue()*1000}if(e.match(/ms$/)){return this.numValue()}return this.numValue()};c.Property.prototype.toRadians=function(){if(!this.hasValue()){return 0}var e=this.value+"";if(e.match(/deg$/)){return this.numValue()*(Math.PI/180)}if(e.match(/grad$/)){return this.numValue()*(Math.PI/200)}if(e.match(/rad$/)){return this.numValue()}return this.numValue()*(Math.PI/180)};var b={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};c.Property.prototype.toTextBaseline=function(){if(!this.hasValue()){return null}return b[this.value]};c.Font=new (function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(n,k,h,m,g,j){var l=j!=null?this.Parse(j):this.CreateFont("","","","","",c.ctx.font);return{fontFamily:g||l.fontFamily,fontSize:m||l.fontSize,fontStyle:n||l.fontStyle,fontWeight:h||l.fontWeight,fontVariant:k||l.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(j){var k={};var l=c.trim(c.compressSpaces(j||"")).split(" ");var m={fontSize:false,fontStyle:false,fontWeight:false,fontVariant:false};var g="";for(var h=0;h<l.length;h++){if(!m.fontStyle&&e.Styles.indexOf(l[h])!=-1){if(l[h]!="inherit"){k.fontStyle=l[h]}m.fontStyle=true}else{if(!m.fontVariant&&e.Variants.indexOf(l[h])!=-1){if(l[h]!="inherit"){k.fontVariant=l[h]}m.fontStyle=m.fontVariant=true}else{if(!m.fontWeight&&e.Weights.indexOf(l[h])!=-1){if(l[h]!="inherit"){k.fontWeight=l[h]}m.fontStyle=m.fontVariant=m.fontWeight=true}else{if(!m.fontSize){if(l[h]!="inherit"){k.fontSize=l[h].split("/")[0]}m.fontStyle=m.fontVariant=m.fontWeight=m.fontSize=true}else{if(l[h]!="inherit"){g+=l[h]}}}}}}if(g!=""){k.fontFamily=g}return k}});c.ToNumberArray=function(g){var e=c.trim(c.compressSpaces((g||"").replace(/,/g," "))).split(" ");for(var f=0;f<e.length;f++){e[f]=parseFloat(e[f])}return e};c.Point=function(e,f){this.x=e;this.y=f};c.Point.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)};c.Point.prototype.applyTransform=function(e){var f=this.x*e[0]+this.y*e[2]+e[4];var g=this.x*e[1]+this.y*e[3]+e[5];this.x=f;this.y=g};c.CreatePoint=function(f){var e=c.ToNumberArray(f);return new c.Point(e[0],e[1])};c.CreatePath=function(g){var e=c.ToNumberArray(g);var h=[];for(var f=0;f<e.length;f+=2){h.push(new c.Point(e[f],e[f+1]))}return h};c.BoundingBox=function(f,h,e,g){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(j,k){if(j!=null){if(isNaN(this.x1)||isNaN(this.x2)){this.x1=j;this.x2=j}if(j<this.x1){this.x1=j}if(j>this.x2){this.x2=j}}if(k!=null){if(isNaN(this.y1)||isNaN(this.y2)){this.y1=k;this.y2=k}if(k<this.y1){this.y1=k}if(k>this.y2){this.y2=k}}};this.addX=function(j){this.addPoint(j,null)};this.addY=function(j){this.addPoint(null,j)};this.addBoundingBox=function(j){this.addPoint(j.x1,j.y1);this.addPoint(j.x2,j.y2)};this.addQuadraticCurve=function(o,n,k,j,q,p){var m=o+2/3*(k-o);var l=n+2/3*(j-n);var s=m+1/3*(q-o);var r=l+1/3*(p-n);this.addBezierCurve(o,n,m,s,l,r,q,p)};this.addBezierCurve=function(x,w,n,l,s,q,z,y){var o=[x,w],m=[n,l],k=[s,q],j=[z,y];this.addPoint(o[0],o[1]);this.addPoint(j[0],j[1]);for(i=0;i<=1;i++){var A=function(E){return Math.pow(1-E,3)*o[i]+3*Math.pow(1-E,2)*E*m[i]+3*(1-E)*Math.pow(E,2)*k[i]+Math.pow(E,3)*j[i]};var C=6*o[i]-12*m[i]+6*k[i];var D=-3*o[i]+9*m[i]-9*k[i]+3*j[i];var B=3*m[i]-3*o[i];if(D==0){if(C==0){continue}var v=-B/C;if(0<v&&v<1){if(i==0){this.addX(A(v))}if(i==1){this.addY(A(v))}}continue}var p=Math.pow(C,2)-4*B*D;if(p<0){continue}var u=(-C+Math.sqrt(p))/(2*D);if(0<u&&u<1){if(i==0){this.addX(A(u))}if(i==1){this.addY(A(u))}}var r=(-C-Math.sqrt(p))/(2*D);if(0<r&&r<1){if(i==0){this.addX(A(r))}if(i==1){this.addY(A(r))}}}};this.isPointInBox=function(j,k){return(this.x1<=j&&j<=this.x2&&this.y1<=k&&k<=this.y2)};this.addPoint(f,h);this.addPoint(e,g)};c.Transform=function(e){var k=this;this.Type={};this.Type.translate=function(m){this.p=c.CreatePoint(m);this.apply=function(n){n.translate(this.p.x||0,this.p.y||0)};this.unapply=function(n){n.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(n){n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(n){var m=c.ToNumberArray(n);this.angle=new c.Property("angle",m[0]);this.cx=m[1]||0;this.cy=m[2]||0;this.apply=function(o){o.translate(this.cx,this.cy);o.rotate(this.angle.toRadians());o.translate(-this.cx,-this.cy)};this.unapply=function(o){o.translate(this.cx,this.cy);o.rotate(-1*this.angle.toRadians());o.translate(-this.cx,-this.cy)};this.applyToPoint=function(q){var o=this.angle.toRadians();q.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);q.applyTransform([Math.cos(o),Math.sin(o),-Math.sin(o),Math.cos(o),0,0]);q.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(m){this.p=c.CreatePoint(m);this.apply=function(n){n.scale(this.p.x||1,this.p.y||this.p.x||1)};this.unapply=function(n){n.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(n){n.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(m){this.m=c.ToNumberArray(m);this.apply=function(n){n.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.unapply=function(x){var w=this.m[0];var v=this.m[2];var u=this.m[4];var t=this.m[1];var s=this.m[3];var r=this.m[5];var p=0;var o=0;var n=1;var q=1/(w*(s*n-r*o)-v*(t*n-r*p)+u*(t*o-s*p));x.transform(q*(s*n-r*o),q*(r*p-t*n),q*(u*o-v*n),q*(w*n-u*p),q*(v*r-u*s),q*(u*t-w*r))};this.applyToPoint=function(n){n.applyTransform(this.m)}};this.Type.SkewBase=function(m){this.base=k.Type.matrix;this.base(m);this.angle=new c.Property("angle",m)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(m){this.base=k.Type.SkewBase;this.base(m);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(m){this.base=k.Type.SkewBase;this.base(m);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(m){for(var n=0;n<this.transforms.length;n++){this.transforms[n].apply(m)}};this.unapply=function(m){for(var n=this.transforms.length-1;n>=0;n--){this.transforms[n].unapply(m)}};this.applyToPoint=function(n){for(var m=0;m<this.transforms.length;m++){this.transforms[m].applyToPoint(n)}};var l=c.trim(c.compressSpaces(e)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var g=0;g<l.length;g++){var j=c.trim(l[g].split("(")[0]);var h=l[g].split("(")[1].replace(")","");var f=new this.Type[j](h);f.type=j;this.transforms.push(f)}};c.AspectRatio=function(u,s,f,m,t,e,j,h,r,q){s=c.compressSpaces(s);s=s.replace(/^defer\s/,"");var l=s.split(" ")[0]||"xMidYMid";var g=s.split(" ")[1]||"meet";var p=f/m;var o=t/e;var k=Math.min(p,o);var n=Math.max(p,o);if(g=="meet"){m*=k;e*=k}if(g=="slice"){m*=n;e*=n}r=new c.Property("refX",r);q=new c.Property("refY",q);if(r.hasValue()&&q.hasValue()){u.translate(-k*r.toPixels("x"),-k*q.toPixels("y"))}else{if(l.match(/^xMid/)&&((g=="meet"&&k==o)||(g=="slice"&&n==o))){u.translate(f/2-m/2,0)}if(l.match(/YMid$/)&&((g=="meet"&&k==p)||(g=="slice"&&n==p))){u.translate(0,t/2-e/2)}if(l.match(/^xMax/)&&((g=="meet"&&k==o)||(g=="slice"&&n==o))){u.translate(f-m,0)}if(l.match(/YMax$/)&&((g=="meet"&&k==p)||(g=="slice"&&n==p))){u.translate(0,t-e)}}if(l=="none"){u.scale(p,o)}else{if(g=="meet"){u.scale(k,k)}else{if(g=="slice"){u.scale(n,n)}}}u.translate(j==null?0:-j,h==null?0:-h)};c.Element={};c.EmptyProperty=new c.Property("EMPTY","");c.Element.ElementBase=function(k){this.attributes={};this.styles={};this.children=[];this.attribute=function(r,s){var j=this.attributes[r];if(j!=null){return j}if(s==true){j=new c.Property(r,"");this.attributes[r]=j}return j||c.EmptyProperty};this.getHrefAttribute=function(){for(var j in this.attributes){if(j.match(/:href$/)){return this.attributes[j]}}return c.EmptyProperty};this.style=function(t,x,j){var u=this.styles[t];if(u!=null){return u}var r=this.attribute(t);if(r!=null&&r.hasValue()){this.styles[t]=r;return r}if(j!=true){var v=this.parent;if(v!=null){var w=v.style(t);if(w!=null&&w.hasValue()){return w}}}if(x==true){u=new c.Property(t,"");this.styles[t]=u}return u||c.EmptyProperty};this.render=function(r){if(this.style("display").value=="none"){return}if(this.style("visibility").value=="hidden"){return}r.save();if(this.attribute("mask").hasValue()){var j=this.attribute("mask").getDefinition();if(j!=null){j.apply(r,this)}}else{if(this.style("filter").hasValue()){var s=this.style("filter").getDefinition();if(s!=null){s.apply(r,this)}}else{this.setContext(r);this.renderChildren(r);this.clearContext(r)}}r.restore()};this.setContext=function(j){};this.clearContext=function(j){};this.renderChildren=function(j){for(var r=0;r<this.children.length;r++){this.children[r].render(j)}};this.addChild=function(r,j){var s=r;if(j){s=c.CreateElement(r)}s.parent=this;if(s.type!="title"){this.children.push(s)}};if(k!=null&&k.nodeType==1){for(var n=0;n<k.attributes.length;n++){var h=k.attributes[n];this.attributes[h.nodeName]=new c.Property(h.nodeName,h.nodeValue)}var q=c.Styles[k.nodeName];if(q!=null){for(var g in q){this.styles[g]=q[g]}}if(this.attribute("class").hasValue()){var l=c.compressSpaces(this.attribute("class").value).split(" ");for(var m=0;m<l.length;m++){q=c.Styles["."+l[m]];if(q!=null){for(var g in q){this.styles[g]=q[g]}}q=c.Styles[k.nodeName+"."+l[m]];if(q!=null){for(var g in q){this.styles[g]=q[g]}}}}if(this.attribute("id").hasValue()){var q=c.Styles["#"+this.attribute("id").value];if(q!=null){for(var g in q){this.styles[g]=q[g]}}}if(this.attribute("style").hasValue()){var q=this.attribute("style").value.split(";");for(var n=0;n<q.length;n++){if(c.trim(q[n])!=""){var f=q[n].split(":");var g=c.trim(f[0]);var o=c.trim(f[1]);this.styles[g]=new c.Property(g,o)}}}if(this.attribute("id").hasValue()){if(c.Definitions[this.attribute("id").value]==null){c.Definitions[this.attribute("id").value]=this}}for(var n=0;n<k.childNodes.length;n++){var e=k.childNodes[n];if(e.nodeType==1){this.addChild(e,true)}if(this.captureTextNodes&&(e.nodeType==3||e.nodeType==4)){var p=e.nodeValue||e.text||"";if(c.trim(c.compressSpaces(p))!=""){this.addChild(new c.Element.tspan(e),false)}}}}};c.Element.RenderedElementBase=function(e){this.base=c.Element.ElementBase;this.base(e);this.setContext=function(o){if(this.style("fill").isUrlDefinition()){var l=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));if(l!=null){o.fillStyle=l}}else{if(this.style("fill").hasValue()){var n=this.style("fill");if(n.value=="currentColor"){n.value=this.style("color").value}if(n.value!="inherit"){o.fillStyle=(n.value=="none"?"rgba(0,0,0,0)":n.value)}}}if(this.style("fill-opacity").hasValue()){var n=new c.Property("fill",o.fillStyle);n=n.addOpacity(this.style("fill-opacity"));o.fillStyle=n.value}if(this.style("stroke").isUrlDefinition()){var l=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));if(l!=null){o.strokeStyle=l}}else{if(this.style("stroke").hasValue()){var m=this.style("stroke");if(m.value=="currentColor"){m.value=this.style("color").value}if(m.value!="inherit"){o.strokeStyle=(m.value=="none"?"rgba(0,0,0,0)":m.value)}}}if(this.style("stroke-opacity").hasValue()){var m=new c.Property("stroke",o.strokeStyle);m=m.addOpacity(this.style("stroke-opacity"));o.strokeStyle=m.value}if(this.style("stroke-width").hasValue()){var k=this.style("stroke-width").toPixels();o.lineWidth=k==0?0.001:k}if(this.style("stroke-linecap").hasValue()){o.lineCap=this.style("stroke-linecap").value}if(this.style("stroke-linejoin").hasValue()){o.lineJoin=this.style("stroke-linejoin").value}if(this.style("stroke-miterlimit").hasValue()){o.miterLimit=this.style("stroke-miterlimit").value}if(this.style("stroke-dasharray").hasValue()&&this.style("stroke-dasharray").value!="none"){var h=c.ToNumberArray(this.style("stroke-dasharray").value);if(typeof(o.setLineDash)!="undefined"){o.setLineDash(h)}else{if(typeof(o.webkitLineDash)!="undefined"){o.webkitLineDash=h}else{if(typeof(o.mozDash)!="undefined"&&!(h.length==1&&h[0]==0)){o.mozDash=h}}}var j=this.style("stroke-dashoffset").numValueOrDefault(1);if(typeof(o.lineDashOffset)!="undefined"){o.lineDashOffset=j}else{if(typeof(o.webkitLineDashOffset)!="undefined"){o.webkitLineDashOffset=j}else{if(typeof(o.mozDashOffset)!="undefined"){o.mozDashOffset=j}}}}if(typeof(o.font)!="undefined"){o.font=c.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()}if(this.attribute("transform").hasValue()){var f=new c.Transform(this.attribute("transform").value);f.apply(o)}if(this.style("clip-path",false,true).hasValue()){var g=this.style("clip-path",false,true).getDefinition();if(g!=null){g.apply(o)}}if(this.style("opacity").hasValue()){o.globalAlpha=this.style("opacity").numValue()}}};c.Element.RenderedElementBase.prototype=new c.Element.ElementBase;c.Element.PathElementBase=function(e){this.base=c.Element.RenderedElementBase;this.base(e);this.path=function(f){if(f!=null){f.beginPath()}return new c.BoundingBox()};this.renderChildren=function(g){this.path(g);c.Mouse.checkPath(this,g);if(g.fillStyle!=""){if(this.style("fill-rule").valueOrDefault("inherit")!="inherit"){g.fill(this.style("fill-rule").value)}else{g.fill()}}if(g.strokeStyle!=""){g.stroke()}var j=this.getMarkers();if(j!=null){if(this.style("marker-start").isUrlDefinition()){var f=this.style("marker-start").getDefinition();f.render(g,j[0][0],j[0][1])}if(this.style("marker-mid").isUrlDefinition()){var f=this.style("marker-mid").getDefinition();for(var h=1;h<j.length-1;h++){f.render(g,j[h][0],j[h][1])}}if(this.style("marker-end").isUrlDefinition()){var f=this.style("marker-end").getDefinition();f.render(g,j[j.length-1][0],j[j.length-1][1])}}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};c.Element.PathElementBase.prototype=new c.Element.RenderedElementBase;c.Element.svg=function(e){this.base=c.Element.RenderedElementBase;this.base(e);this.baseClearContext=this.clearContext;this.clearContext=function(f){this.baseClearContext(f);c.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(j){j.strokeStyle="rgba(0,0,0,0)";j.lineCap="butt";j.lineJoin="miter";j.miterLimit=4;if(typeof(j.font)!="undefined"&&typeof(window.getComputedStyle)!="undefined"){j.font=window.getComputedStyle(j.canvas).getPropertyValue("font")}this.baseSetContext(j);if(!this.attribute("x").hasValue()){this.attribute("x",true).value=0}if(!this.attribute("y").hasValue()){this.attribute("y",true).value=0}j.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var k=c.ViewPort.width();var h=c.ViewPort.height();if(!this.attribute("width").hasValue()){this.attribute("width",true).value="100%"}if(!this.attribute("height").hasValue()){this.attribute("height",true).value="100%"}if(typeof(this.root)=="undefined"){k=this.attribute("width").toPixels("x");h=this.attribute("height").toPixels("y");var g=0;var n=0;if(this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()){g=-this.attribute("refX").toPixels("x");n=-this.attribute("refY").toPixels("y")}if(this.attribute("overflow").valueOrDefault("hidden")!="visible"){j.beginPath();j.moveTo(g,n);j.lineTo(k,n);j.lineTo(k,h);j.lineTo(g,h);j.closePath();j.clip()}}c.ViewPort.SetCurrent(k,h);if(this.attribute("viewBox").hasValue()){var l=c.ToNumberArray(this.attribute("viewBox").value);var f=l[0];var m=l[1];k=l[2];h=l[3];c.AspectRatio(j,this.attribute("preserveAspectRatio").value,c.ViewPort.width(),k,c.ViewPort.height(),h,f,m,this.attribute("refX").value,this.attribute("refY").value);c.ViewPort.RemoveCurrent();c.ViewPort.SetCurrent(l[2],l[3])}}};c.Element.svg.prototype=new c.Element.RenderedElementBase;c.Element.rect=function(e){this.base=c.Element.PathElementBase;this.base(e);this.path=function(h){var g=this.attribute("x").toPixels("x");var m=this.attribute("y").toPixels("y");var j=this.attribute("width").toPixels("x");var f=this.attribute("height").toPixels("y");var l=this.attribute("rx").toPixels("x");var k=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()){k=l}if(this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()){l=k}l=Math.min(l,j/2);k=Math.min(k,f/2);if(h!=null){h.beginPath();h.moveTo(g+l,m);h.lineTo(g+j-l,m);h.quadraticCurveTo(g+j,m,g+j,m+k);h.lineTo(g+j,m+f-k);h.quadraticCurveTo(g+j,m+f,g+j-l,m+f);h.lineTo(g+l,m+f);h.quadraticCurveTo(g,m+f,g,m+f-k);h.lineTo(g,m+k);h.quadraticCurveTo(g,m,g+l,m);h.closePath()}return new c.BoundingBox(g,m,g+j,m+f)}};c.Element.rect.prototype=new c.Element.PathElementBase;c.Element.circle=function(e){this.base=c.Element.PathElementBase;this.base(e);this.path=function(g){var f=this.attribute("cx").toPixels("x");var j=this.attribute("cy").toPixels("y");var h=this.attribute("r").toPixels();if(g!=null){g.beginPath();g.arc(f,j,h,0,Math.PI*2,true);g.closePath()}return new c.BoundingBox(f-h,j-h,f+h,j+h)}};c.Element.circle.prototype=new c.Element.PathElementBase;c.Element.ellipse=function(e){this.base=c.Element.PathElementBase;this.base(e);this.path=function(g){var j=4*((Math.sqrt(2)-1)/3);var k=this.attribute("rx").toPixels("x");var h=this.attribute("ry").toPixels("y");var f=this.attribute("cx").toPixels("x");var l=this.attribute("cy").toPixels("y");if(g!=null){g.beginPath();g.moveTo(f,l-h);g.bezierCurveTo(f+(j*k),l-h,f+k,l-(j*h),f+k,l);g.bezierCurveTo(f+k,l+(j*h),f+(j*k),l+h,f,l+h);g.bezierCurveTo(f-(j*k),l+h,f-k,l+(j*h),f-k,l);g.bezierCurveTo(f-k,l-(j*h),f-(j*k),l-h,f,l-h);g.closePath()}return new c.BoundingBox(f-k,l-h,f+k,l+h)}};c.Element.ellipse.prototype=new c.Element.PathElementBase;c.Element.line=function(e){this.base=c.Element.PathElementBase;this.base(e);this.getPoints=function(){return[new c.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new c.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(f){var g=this.getPoints();if(f!=null){f.beginPath();f.moveTo(g[0].x,g[0].y);f.lineTo(g[1].x,g[1].y)}return new c.BoundingBox(g[0].x,g[0].y,g[1].x,g[1].y)};this.getMarkers=function(){var g=this.getPoints();var f=g[0].angleTo(g[1]);return[[g[0],f],[g[1],f]]}};c.Element.line.prototype=new c.Element.PathElementBase;c.Element.polyline=function(e){this.base=c.Element.PathElementBase;this.base(e);this.points=c.CreatePath(this.attribute("points").value);this.path=function(f){var h=new c.BoundingBox(this.points[0].x,this.points[0].y);if(f!=null){f.beginPath();f.moveTo(this.points[0].x,this.points[0].y)}for(var g=1;g<this.points.length;g++){h.addPoint(this.points[g].x,this.points[g].y);if(f!=null){f.lineTo(this.points[g].x,this.points[g].y)}}return h};this.getMarkers=function(){var g=[];for(var f=0;f<this.points.length-1;f++){g.push([this.points[f],this.points[f].angleTo(this.points[f+1])])}g.push([this.points[this.points.length-1],g[g.length-1][1]]);return g}};c.Element.polyline.prototype=new c.Element.PathElementBase;c.Element.polygon=function(e){this.base=c.Element.polyline;this.base(e);this.basePath=this.path;this.path=function(f){var g=this.basePath(f);if(f!=null){f.lineTo(this.points[0].x,this.points[0].y);f.closePath()}return g}};c.Element.polygon.prototype=new c.Element.polyline;c.Element.path=function(e){this.base=c.Element.PathElementBase;this.base(e);var f=this.attribute("d").value;f=f.replace(/,/gm," ");f=f.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");f=f.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");f=f.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");f=f.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");f=f.replace(/([0-9])([+\-])/gm,"$1 $2");f=f.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");f=f.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");f=c.compressSpaces(f);f=c.trim(f);this.PathParser=new (function(g){this.tokens=g.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new c.Point(0,0);this.control=new c.Point(0,0);this.current=new c.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){if(this.isEnd()){return true}return this.tokens[this.i+1].match(/^[A-Za-z]$/)!=null};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return true;break}return false};this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var h=new c.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(h)};this.getAsControlPoint=function(){var h=this.getPoint();this.control=h;return h};this.getAsCurrentPoint=function(){var h=this.getPoint();this.current=h;return h};this.getReflectedControlPoint=function(){if(this.previousCommand.toLowerCase()!="c"&&this.previousCommand.toLowerCase()!="s"&&this.previousCommand.toLowerCase()!="q"&&this.previousCommand.toLowerCase()!="t"){return this.current}var h=new c.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return h};this.makeAbsolute=function(h){if(this.isRelativeCommand()){h.x+=this.current.x;h.y+=this.current.y}return h};this.addMarker=function(j,k,h){if(h!=null&&this.angles.length>0&&this.angles[this.angles.length-1]==null){this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(h)}this.addMarkerAngle(j,k==null?null:k.angleTo(j))};this.addMarkerAngle=function(j,h){this.points.push(j);this.angles.push(h)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var k=0;k<this.angles.length;k++){if(this.angles[k]==null){for(var h=k+1;h<this.angles.length;h++){if(this.angles[h]!=null){this.angles[k]=this.angles[h];break}}}}return this.angles}})(f);this.path=function(K){var M=this.PathParser;M.reset();var x=new c.BoundingBox();if(K!=null){K.beginPath()}while(!M.isEnd()){M.nextCommand();switch(M.command){case"M":case"m":var H=M.getAsCurrentPoint();M.addMarker(H);x.addPoint(H.x,H.y);if(K!=null){K.moveTo(H.x,H.y)}M.start=M.current;while(!M.isCommandOrEnd()){var H=M.getAsCurrentPoint();M.addMarker(H,M.start);x.addPoint(H.x,H.y);if(K!=null){K.lineTo(H.x,H.y)}}break;case"L":case"l":while(!M.isCommandOrEnd()){var Q=M.current;var H=M.getAsCurrentPoint();M.addMarker(H,Q);x.addPoint(H.x,H.y);if(K!=null){K.lineTo(H.x,H.y)}}break;case"H":case"h":while(!M.isCommandOrEnd()){var j=new c.Point((M.isRelativeCommand()?M.current.x:0)+M.getScalar(),M.current.y);M.addMarker(j,M.current);M.current=j;x.addPoint(M.current.x,M.current.y);if(K!=null){K.lineTo(M.current.x,M.current.y)}}break;case"V":case"v":while(!M.isCommandOrEnd()){var j=new c.Point(M.current.x,(M.isRelativeCommand()?M.current.y:0)+M.getScalar());M.addMarker(j,M.current);M.current=j;x.addPoint(M.current.x,M.current.y);if(K!=null){K.lineTo(M.current.x,M.current.y)}}break;case"C":case"c":while(!M.isCommandOrEnd()){var O=M.current;var n=M.getPoint();var o=M.getAsControlPoint();var z=M.getAsCurrentPoint();M.addMarker(z,o,n);x.addBezierCurve(O.x,O.y,n.x,n.y,o.x,o.y,z.x,z.y);if(K!=null){K.bezierCurveTo(n.x,n.y,o.x,o.y,z.x,z.y)}}break;case"S":case"s":while(!M.isCommandOrEnd()){var O=M.current;var n=M.getReflectedControlPoint();var o=M.getAsControlPoint();var z=M.getAsCurrentPoint();M.addMarker(z,o,n);x.addBezierCurve(O.x,O.y,n.x,n.y,o.x,o.y,z.x,z.y);if(K!=null){K.bezierCurveTo(n.x,n.y,o.x,o.y,z.x,z.y)}}break;case"Q":case"q":while(!M.isCommandOrEnd()){var O=M.current;var o=M.getAsControlPoint();var z=M.getAsCurrentPoint();M.addMarker(z,o,o);x.addQuadraticCurve(O.x,O.y,o.x,o.y,z.x,z.y);if(K!=null){K.quadraticCurveTo(o.x,o.y,z.x,z.y)}}break;case"T":case"t":while(!M.isCommandOrEnd()){var O=M.current;var o=M.getReflectedControlPoint();M.control=o;var z=M.getAsCurrentPoint();M.addMarker(z,o,o);x.addQuadraticCurve(O.x,O.y,o.x,o.y,z.x,z.y);if(K!=null){K.quadraticCurveTo(o.x,o.y,z.x,z.y)}}break;case"A":case"a":while(!M.isCommandOrEnd()){var O=M.current;var w=M.getScalar();var t=M.getScalar();var h=M.getScalar()*(Math.PI/180);var y=M.getScalar();var q=M.getScalar();var z=M.getAsCurrentPoint();var T=new c.Point(Math.cos(h)*(O.x-z.x)/2+Math.sin(h)*(O.y-z.y)/2,-Math.sin(h)*(O.x-z.x)/2+Math.cos(h)*(O.y-z.y)/2);var L=Math.pow(T.x,2)/Math.pow(w,2)+Math.pow(T.y,2)/Math.pow(t,2);if(L>1){w*=Math.sqrt(L);t*=Math.sqrt(L)}var D=(y==q?-1:1)*Math.sqrt(((Math.pow(w,2)*Math.pow(t,2))-(Math.pow(w,2)*Math.pow(T.y,2))-(Math.pow(t,2)*Math.pow(T.x,2)))/(Math.pow(w,2)*Math.pow(T.y,2)+Math.pow(t,2)*Math.pow(T.x,2)));if(isNaN(D)){D=0}var C=new c.Point(D*w*T.y/t,D*-t*T.x/w);var k=new c.Point((O.x+z.x)/2+Math.cos(h)*C.x-Math.sin(h)*C.y,(O.y+z.y)/2+Math.sin(h)*C.x+Math.cos(h)*C.y);var J=function(l){return Math.sqrt(Math.pow(l[0],2)+Math.pow(l[1],2))};var F=function(m,l){return(m[0]*l[0]+m[1]*l[1])/(J(m)*J(l))};var R=function(m,l){return(m[0]*l[1]<m[1]*l[0]?-1:1)*Math.acos(F(m,l))};var S=R([1,0],[(T.x-C.x)/w,(T.y-C.y)/t]);var B=[(T.x-C.x)/w,(T.y-C.y)/t];var A=[(-T.x-C.x)/w,(-T.y-C.y)/t];var P=R(B,A);if(F(B,A)<=-1){P=Math.PI}if(F(B,A)>=1){P=0}var I=1-q?1:-1;var N=S+I*(P/2);var g=new c.Point(k.x+w*Math.cos(N),k.y+t*Math.sin(N));M.addMarkerAngle(g,N-I*Math.PI/2);M.addMarkerAngle(z,N-I*Math.PI);x.addPoint(z.x,z.y);if(K!=null){var F=w>t?w:t;var G=w>t?1:w/t;var E=w>t?t/w:1;K.translate(k.x,k.y);K.rotate(h);K.scale(G,E);K.arc(0,0,F,S,S+P,1-q);K.scale(1/G,1/E);K.rotate(-h);K.translate(-k.x,-k.y)}}break;case"Z":case"z":if(K!=null){K.closePath()}M.current=M.start}}return x};this.getMarkers=function(){var h=this.PathParser.getMarkerPoints();var k=this.PathParser.getMarkerAngles();var j=[];for(var g=0;g<h.length;g++){j.push([h[g],k[g]])}return j}};c.Element.path.prototype=new c.Element.PathElementBase;c.Element.pattern=function(e){this.base=c.Element.ElementBase;this.base(e);this.createPattern=function(p,h){var f=this.attribute("width").toPixels("x",true);var o=this.attribute("height").toPixels("y",true);var m=new c.Element.svg();m.attributes.viewBox=new c.Property("viewBox",this.attribute("viewBox").value);m.attributes.width=new c.Property("width",f+"px");m.attributes.height=new c.Property("height",o+"px");m.attributes.transform=new c.Property("transform",this.attribute("patternTransform").value);m.children=this.children;var k=document.createElement("canvas");k.width=f;k.height=o;var g=k.getContext("2d");if(this.attribute("x").hasValue()&&this.attribute("y").hasValue()){g.translate(this.attribute("x").toPixels("x",true),this.attribute("y").toPixels("y",true))}for(var n=-1;n<=1;n++){for(var l=-1;l<=1;l++){g.save();g.translate(n*k.width,l*k.height);m.render(g);g.restore()}}var j=p.createPattern(k,"repeat");return j}};c.Element.pattern.prototype=new c.Element.ElementBase;c.Element.marker=function(e){this.base=c.Element.ElementBase;this.base(e);this.baseRender=this.render;this.render=function(g,f,j){g.translate(f.x,f.y);if(this.attribute("orient").valueOrDefault("auto")=="auto"){g.rotate(j)}if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){g.scale(g.lineWidth,g.lineWidth)}g.save();var h=new c.Element.svg();h.attributes.viewBox=new c.Property("viewBox",this.attribute("viewBox").value);h.attributes.refX=new c.Property("refX",this.attribute("refX").value);h.attributes.refY=new c.Property("refY",this.attribute("refY").value);h.attributes.width=new c.Property("width",this.attribute("markerWidth").value);h.attributes.height=new c.Property("height",this.attribute("markerHeight").value);h.attributes.fill=new c.Property("fill",this.attribute("fill").valueOrDefault("black"));h.attributes.stroke=new c.Property("stroke",this.attribute("stroke").valueOrDefault("none"));h.children=this.children;h.render(g);g.restore();if(this.attribute("markerUnits").valueOrDefault("strokeWidth")=="strokeWidth"){g.scale(1/g.lineWidth,1/g.lineWidth)}if(this.attribute("orient").valueOrDefault("auto")=="auto"){g.rotate(-j)}g.translate(-f.x,-f.y)}};c.Element.marker.prototype=new c.Element.ElementBase;c.Element.defs=function(e){this.base=c.Element.ElementBase;this.base(e);this.render=function(f){}};c.Element.defs.prototype=new c.Element.ElementBase;c.Element.GradientBase=function(f){this.base=c.Element.ElementBase;this.base(f);this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");this.stops=[];for(var e=0;e<this.children.length;e++){var g=this.children[e];if(g.type=="stop"){this.stops.push(g)}}this.getGradient=function(){};this.createGradient=function(u,l,h){var t=this;if(this.getHrefAttribute().hasValue()){t=this.getHrefAttribute().getDefinition()}var k=function(v){if(h.hasValue()){var w=new c.Property("color",v);return w.addOpacity(h).value}return v};var n=this.getGradient(u,l);if(n==null){return k(t.stops[t.stops.length-1].color)}for(var m=0;m<t.stops.length;m++){n.addColorStop(t.stops[m].offset,k(t.stops[m].color))}if(this.attribute("gradientTransform").hasValue()){var p=c.ViewPort.viewPorts[0];var q=new c.Element.rect();q.attributes.x=new c.Property("x",-c.MAX_VIRTUAL_PIXELS/3);q.attributes.y=new c.Property("y",-c.MAX_VIRTUAL_PIXELS/3);q.attributes.width=new c.Property("width",c.MAX_VIRTUAL_PIXELS);q.attributes.height=new c.Property("height",c.MAX_VIRTUAL_PIXELS);var s=new c.Element.g();s.attributes.transform=new c.Property("transform",this.attribute("gradientTransform").value);s.children=[q];var r=new c.Element.svg();r.attributes.x=new c.Property("x",0);r.attributes.y=new c.Property("y",0);r.attributes.width=new c.Property("width",p.width);r.attributes.height=new c.Property("height",p.height);r.children=[s];var o=document.createElement("canvas");o.width=p.width;o.height=p.height;var j=o.getContext("2d");j.fillStyle=n;r.render(j);return j.createPattern(o,"no-repeat")}return n}};c.Element.GradientBase.prototype=new c.Element.ElementBase;c.Element.linearGradient=function(e){this.base=c.Element.GradientBase;this.base(e);this.getGradient=function(f,k){var m=this.gradientUnits=="objectBoundingBox"?k.getBoundingBox():null;if(!this.attribute("x1").hasValue()&&!this.attribute("y1").hasValue()&&!this.attribute("x2").hasValue()&&!this.attribute("y2").hasValue()){this.attribute("x1",true).value=0;this.attribute("y1",true).value=0;this.attribute("x2",true).value=1;this.attribute("y2",true).value=0}var h=(this.gradientUnits=="objectBoundingBox"?m.x()+m.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"));var l=(this.gradientUnits=="objectBoundingBox"?m.y()+m.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"));var g=(this.gradientUnits=="objectBoundingBox"?m.x()+m.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"));var j=(this.gradientUnits=="objectBoundingBox"?m.y()+m.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y"));if(h==g&&l==j){return null}return f.createLinearGradient(h,l,g,j)}};c.Element.linearGradient.prototype=new c.Element.GradientBase;c.Element.radialGradient=function(e){this.base=c.Element.GradientBase;this.base(e);this.getGradient=function(g,h){var m=h.getBoundingBox();if(!this.attribute("cx").hasValue()){this.attribute("cx",true).value="50%"}if(!this.attribute("cy").hasValue()){this.attribute("cy",true).value="50%"}if(!this.attribute("r").hasValue()){this.attribute("r",true).value="50%"}var f=(this.gradientUnits=="objectBoundingBox"?m.x()+m.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"));var n=(this.gradientUnits=="objectBoundingBox"?m.y()+m.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"));var l=f;var j=n;if(this.attribute("fx").hasValue()){l=(this.gradientUnits=="objectBoundingBox"?m.x()+m.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"))}if(this.attribute("fy").hasValue()){j=(this.gradientUnits=="objectBoundingBox"?m.y()+m.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"))}var k=(this.gradientUnits=="objectBoundingBox"?(m.width()+m.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels());return g.createRadialGradient(l,j,0,f,n,k)}};c.Element.radialGradient.prototype=new c.Element.GradientBase;c.Element.stop=function(f){this.base=c.Element.ElementBase;this.base(f);this.offset=this.attribute("offset").numValue();if(this.offset<0){this.offset=0}if(this.offset>1){this.offset=1}var e=this.style("stop-color");if(this.style("stop-opacity").hasValue()){e=e.addOpacity(this.style("stop-opacity"))}this.color=e.value};c.Element.stop.prototype=new c.Element.ElementBase;c.Element.AnimateBase=function(e){this.base=c.Element.ElementBase;this.base(e);c.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var g=this.attribute("attributeType").value;var f=this.attribute("attributeName").value;if(g=="CSS"){return this.parent.style(f,true)}return this.parent.attribute(f,true)};this.initialValue=null;this.initialUnits="";this.removed=false;this.calcValue=function(){return""};this.update=function(j){if(this.initialValue==null){this.initialValue=this.getProperty().value;this.initialUnits=this.getProperty().getUnits()}if(this.duration>this.maxDuration){if(this.attribute("repeatCount").value=="indefinite"||this.attribute("repeatDur").value=="indefinite"){this.duration=0}else{if(this.attribute("fill").valueOrDefault("remove")=="freeze"&&!this.frozen){this.frozen=true;this.parent.animationFrozen=true;this.parent.animationFrozenValue=this.getProperty().value}else{if(this.attribute("fill").valueOrDefault("remove")=="remove"&&!this.removed){this.removed=true;this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue;return true}}}return false}this.duration=this.duration+j;var f=false;if(this.begin<this.duration){var h=this.calcValue();if(this.attribute("type").hasValue()){var g=this.attribute("type").value;h=g+"("+h+")"}this.getProperty().value=h;f=true}return f};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");if(this.values.hasValue()){this.values.value=this.values.value.split(";")}this.progress=function(){var g={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var j=g.progress*(this.values.value.length-1);var h=Math.floor(j),f=Math.ceil(j);g.from=new c.Property("from",parseFloat(this.values.value[h]));g.to=new c.Property("to",parseFloat(this.values.value[f]));g.progress=(j-h)/(f-h)}else{g.from=this.from;g.to=this.to}return g}};c.Element.AnimateBase.prototype=new c.Element.ElementBase;c.Element.animate=function(e){this.base=c.Element.AnimateBase;this.base(e);this.calcValue=function(){var g=this.progress();var f=g.from.numValue()+(g.to.numValue()-g.from.numValue())*g.progress;return f+this.initialUnits}};c.Element.animate.prototype=new c.Element.AnimateBase;c.Element.animateColor=function(e){this.base=c.Element.AnimateBase;this.base(e);this.calcValue=function(){var k=this.progress();var m=new RGBColor(k.from.value);var l=new RGBColor(k.to.value);if(m.ok&&l.ok){var j=m.r+(l.r-m.r)*k.progress;var h=m.g+(l.g-m.g)*k.progress;var f=m.b+(l.b-m.b)*k.progress;return"rgb("+parseInt(j,10)+","+parseInt(h,10)+","+parseInt(f,10)+")"}return this.attribute("from").value}};c.Element.animateColor.prototype=new c.Element.AnimateBase;c.Element.animateTransform=function(e){this.base=c.Element.AnimateBase;this.base(e);this.calcValue=function(){var h=this.progress();var k=c.ToNumberArray(h.from.value);var j=c.ToNumberArray(h.to.value);var g="";for(var f=0;f<k.length;f++){g+=k[f]+(j[f]-k[f])*h.progress+" "}return g}};c.Element.animateTransform.prototype=new c.Element.animate;c.Element.font=function(f){this.base=c.Element.ElementBase;this.base(f);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isRTL=false;this.isArabic=false;this.fontFace=null;this.missingGlyph=null;this.glyphs=[];for(var e=0;e<this.children.length;e++){var g=this.children[e];if(g.type=="font-face"){this.fontFace=g;if(g.style("font-family").hasValue()){c.Definitions[g.style("font-family").value]=this}}else{if(g.type=="missing-glyph"){this.missingGlyph=g}else{if(g.type=="glyph"){if(g.arabicForm!=""){this.isRTL=true;this.isArabic=true;if(typeof(this.glyphs[g.unicode])=="undefined"){this.glyphs[g.unicode]=[]}this.glyphs[g.unicode][g.arabicForm]=g}else{this.glyphs[g.unicode]=g}}}}}};c.Element.font.prototype=new c.Element.ElementBase;c.Element.fontface=function(e){this.base=c.Element.ElementBase;this.base(e);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};c.Element.fontface.prototype=new c.Element.ElementBase;c.Element.missingglyph=function(e){this.base=c.Element.path;this.base(e);this.horizAdvX=0};c.Element.missingglyph.prototype=new c.Element.path;c.Element.glyph=function(e){this.base=c.Element.path;this.base(e);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};c.Element.glyph.prototype=new c.Element.path;c.Element.text=function(e){this.captureTextNodes=true;this.base=c.Element.RenderedElementBase;this.base(e);this.baseSetContext=this.setContext;this.setContext=function(f){this.baseSetContext(f);var g=this.style("dominant-baseline").toTextBaseline();if(g==null){g=this.style("alignment-baseline").toTextBaseline()}if(g!=null){f.textBaseline=g}};this.getBoundingBox=function(){var f=this.attribute("x").toPixels("x");var h=this.attribute("y").toPixels("y");var g=this.parent.style("font-size").numValueOrDefault(c.Font.Parse(c.ctx.font).fontSize);return new c.BoundingBox(f,h-g,f+Math.floor(g*2/3)*this.children[0].getText().length,h)};this.renderChildren=function(f){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.x+=this.getAnchorDelta(f,this,0);for(var g=0;g<this.children.length;g++){this.renderChild(f,this,g)}};this.getAnchorDelta=function(g,l,k){var f=this.style("text-anchor").valueOrDefault("start");if(f!="start"){var j=0;for(var h=k;h<l.children.length;h++){var m=l.children[h];if(h>k&&m.attribute("x").hasValue()){break}j+=m.measureTextRecursive(g)}return -1*(f=="end"?j:j/2)}return 0};this.renderChild=function(f,h,g){var j=h.children[g];if(j.attribute("x").hasValue()){j.x=j.attribute("x").toPixels("x")+this.getAnchorDelta(f,h,g);if(j.attribute("dx").hasValue()){j.x+=j.attribute("dx").toPixels("x")}}else{if(this.attribute("dx").hasValue()){this.x+=this.attribute("dx").toPixels("x")}if(j.attribute("dx").hasValue()){this.x+=j.attribute("dx").toPixels("x")}j.x=this.x}this.x=j.x+j.measureText(f);if(j.attribute("y").hasValue()){j.y=j.attribute("y").toPixels("y");if(j.attribute("dy").hasValue()){j.y+=j.attribute("dy").toPixels("y")}}else{if(this.attribute("dy").hasValue()){this.y+=this.attribute("dy").toPixels("y")}if(j.attribute("dy").hasValue()){this.y+=j.attribute("dy").toPixels("y")}j.y=this.y}this.y=j.y;j.render(f);for(var g=0;g<j.children.length;g++){this.renderChild(f,j,g)}}};c.Element.text.prototype=new c.Element.RenderedElementBase;c.Element.TextElementBase=function(e){this.base=c.Element.RenderedElementBase;this.base(e);this.getGlyph=function(f,k,g){var l=k[g];var h=null;if(f.isArabic){var j="isolated";if((g==0||k[g-1]==" ")&&g<k.length-2&&k[g+1]!=" "){j="terminal"}if(g>0&&k[g-1]!=" "&&g<k.length-2&&k[g+1]!=" "){j="medial"}if(g>0&&k[g-1]!=" "&&(g==k.length-1||k[g+1]==" ")){j="initial"}if(typeof(f.glyphs[l])!="undefined"){h=f.glyphs[l][j];if(h==null&&f.glyphs[l].type=="glyph"){h=f.glyphs[l]}}}else{h=f.glyphs[l]}if(h==null){h=f.missingGlyph}return h};this.renderChildren=function(n){var l=this.parent.style("font-family").getDefinition();if(l!=null){var o=this.parent.style("font-size").numValueOrDefault(c.Font.Parse(c.ctx.font).fontSize);var h=this.parent.style("font-style").valueOrDefault(c.Font.Parse(c.ctx.font).fontStyle);var m=this.getText();if(l.isRTL){m=m.split("").reverse().join("")}var p=c.ToNumberArray(this.parent.attribute("dx").value);for(var j=0;j<m.length;j++){var k=this.getGlyph(l,m,j);var g=o/l.fontFace.unitsPerEm;n.translate(this.x,this.y);n.scale(g,-g);var f=n.lineWidth;n.lineWidth=n.lineWidth*l.fontFace.unitsPerEm/o;if(h=="italic"){n.transform(1,0,0.4,1,0,0)}k.render(n);if(h=="italic"){n.transform(1,0,-0.4,1,0,0)}n.lineWidth=f;n.scale(1/g,-1/g);n.translate(-this.x,-this.y);this.x+=o*(k.horizAdvX||l.horizAdvX)/l.fontFace.unitsPerEm;if(typeof(p[j])!="undefined"&&!isNaN(p[j])){this.x+=p[j]}}return}if(n.fillStyle!=""){n.fillText(c.compressSpaces(this.getText()),this.x,this.y)}if(n.strokeStyle!=""){n.strokeText(c.compressSpaces(this.getText()),this.x,this.y)}};this.getText=function(){};this.measureTextRecursive=function(f){var h=this.measureText(f);for(var g=0;g<this.children.length;g++){h+=this.children[g].measureTextRecursive(f)}return h};this.measureText=function(n){var l=this.parent.style("font-family").getDefinition();if(l!=null){var o=this.parent.style("font-size").numValueOrDefault(c.Font.Parse(c.ctx.font).fontSize);var g=0;var m=this.getText();if(l.isRTL){m=m.split("").reverse().join("")}var p=c.ToNumberArray(this.parent.attribute("dx").value);for(var j=0;j<m.length;j++){var k=this.getGlyph(l,m,j);g+=(k.horizAdvX||l.horizAdvX)*o/l.fontFace.unitsPerEm;if(typeof(p[j])!="undefined"&&!isNaN(p[j])){g+=p[j]}}return g}var f=c.compressSpaces(this.getText());if(!n.measureText){return f.length*10}n.save();this.setContext(n);var h=n.measureText(f).width;n.restore();return h}};c.Element.TextElementBase.prototype=new c.Element.RenderedElementBase;c.Element.tspan=function(e){this.captureTextNodes=true;this.base=c.Element.TextElementBase;this.base(e);this.text=e.nodeValue||e.text||"";this.getText=function(){return this.text}};c.Element.tspan.prototype=new c.Element.TextElementBase;c.Element.tref=function(e){this.base=c.Element.TextElementBase;this.base(e);this.getText=function(){var f=this.getHrefAttribute().getDefinition();if(f!=null){return f.children[0].getText()}}};c.Element.tref.prototype=new c.Element.TextElementBase;c.Element.a=function(f){this.base=c.Element.TextElementBase;this.base(f);this.hasText=f.childNodes.length>0;for(var e=0;e<f.childNodes.length;e++){if(f.childNodes[e].nodeType!=3){this.hasText=false}}this.text=this.hasText?f.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(h){if(this.hasText){this.baseRenderChildren(h);var k=new c.Property("fontSize",c.Font.Parse(c.ctx.font).fontSize);c.Mouse.checkBoundingBox(this,new c.BoundingBox(this.x,this.y-k.toPixels("y"),this.x+this.measureText(h),this.y))}else{if(this.children.length>0){var j=new c.Element.g();j.children=this.children;j.parent=this;j.render(h)}}};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){c.ctx.canvas.style.cursor="pointer"}};c.Element.a.prototype=new c.Element.TextElementBase;c.Element.image=function(g){this.base=c.Element.RenderedElementBase;this.base(g);var f=this.getHrefAttribute().value;if(f==""){return}var h=f.match(/\.svg$/);c.Images.push(this);this.loaded=false;if(!h){this.img=document.createElement("img");if(c.opts.useCORS==true){this.img.crossOrigin="Anonymous"}var e=this;this.img.onload=function(){e.loaded=true};this.img.onerror=function(){c.log('ERROR: image "'+f+'" not found');e.loaded=true};this.img.src=f}else{this.img=c.ajax(f);this.loaded=true}this.renderChildren=function(l){var k=this.attribute("x").toPixels("x");var n=this.attribute("y").toPixels("y");var m=this.attribute("width").toPixels("x");var j=this.attribute("height").toPixels("y");if(m==0||j==0){return}l.save();if(h){l.drawSvg(this.img,k,n,m,j)}else{l.translate(k,n);c.AspectRatio(l,this.attribute("preserveAspectRatio").value,m,this.img.width,j,this.img.height,0,0);l.drawImage(this.img,0,0)}l.restore()};this.getBoundingBox=function(){var k=this.attribute("x").toPixels("x");var m=this.attribute("y").toPixels("y");var l=this.attribute("width").toPixels("x");var j=this.attribute("height").toPixels("y");return new c.BoundingBox(k,m,k+l,m+j)}};c.Element.image.prototype=new c.Element.RenderedElementBase;c.Element.g=function(e){this.base=c.Element.RenderedElementBase;this.base(e);this.getBoundingBox=function(){var g=new c.BoundingBox();for(var f=0;f<this.children.length;f++){g.addBoundingBox(this.children[f].getBoundingBox())}return g}};c.Element.g.prototype=new c.Element.RenderedElementBase;c.Element.symbol=function(e){this.base=c.Element.RenderedElementBase;this.base(e);this.render=function(f){}};c.Element.symbol.prototype=new c.Element.RenderedElementBase;c.Element.style=function(y){this.base=c.Element.ElementBase;this.base(y);var u="";for(var B=0;B<y.childNodes.length;B++){u+=y.childNodes[B].nodeValue}u=u.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");u=c.compressSpaces(u);var t=u.split("}");for(var B=0;B<t.length;B++){if(c.trim(t[B])!=""){var F=t[B].split("{");var l=F[0].split(",");var e=F[1].split(";");for(var A=0;A<l.length;A++){var q=c.trim(l[A]);if(q!=""){var h={};for(var z=0;z<e.length;z++){var g=e[z].indexOf(":");var G=e[z].substr(0,g);var x=e[z].substr(g+1,e[z].length-g);if(G!=null&&x!=null){h[c.trim(G)]=new c.Property(c.trim(G),c.trim(x))}}c.Styles[q]=h;if(q=="@font-face"){var D=h["font-family"].value.replace(/"/g,"");var r=h.src.value.split(",");for(var v=0;v<r.length;v++){if(r[v].indexOf('format("svg")')>0){var o=r[v].indexOf("url");var n=r[v].indexOf(")",o);var m=r[v].substr(o+5,n-o-6);var E=c.parseXml(c.ajax(m));var p=E.getElementsByTagName("font");for(var C=0;C<p.length;C++){var w=c.CreateElement(p[C]);c.Definitions[D]=w}}}}}}}}};c.Element.style.prototype=new c.Element.ElementBase;c.Element.use=function(f){this.base=c.Element.RenderedElementBase;this.base(f);this.baseSetContext=this.setContext;this.setContext=function(g){this.baseSetContext(g);if(this.attribute("x").hasValue()){g.translate(this.attribute("x").toPixels("x"),0)}if(this.attribute("y").hasValue()){g.translate(0,this.attribute("y").toPixels("y"))}};var e=this.getHrefAttribute().getDefinition();this.path=function(g){if(e!=null){e.path(g)}};this.getBoundingBox=function(){if(e!=null){return e.getBoundingBox()}};this.renderChildren=function(g){if(e!=null){var j=e;if(e.type=="symbol"){j=new c.Element.svg();j.type="svg";j.attributes.viewBox=new c.Property("viewBox",e.attribute("viewBox").value);j.attributes.preserveAspectRatio=new c.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value);j.attributes.overflow=new c.Property("overflow",e.attribute("overflow").value);j.children=e.children}if(j.type=="svg"){if(this.attribute("width").hasValue()){j.attributes.width=new c.Property("width",this.attribute("width").value)}if(this.attribute("height").hasValue()){j.attributes.height=new c.Property("height",this.attribute("height").value)}}var h=j.parent;j.parent=null;j.render(g);j.parent=h}}};c.Element.use.prototype=new c.Element.RenderedElementBase;c.Element.mask=function(e){this.base=c.Element.ElementBase;this.base(e);this.apply=function(q,h){var o=this.attribute("x").toPixels("x");var n=this.attribute("y").toPixels("y");var f=this.attribute("width").toPixels("x");var p=this.attribute("height").toPixels("y");if(f==0&&p==0){var k=new c.BoundingBox();for(var j=0;j<this.children.length;j++){k.addBoundingBox(this.children[j].getBoundingBox())}var o=Math.floor(k.x1);var n=Math.floor(k.y1);var f=Math.floor(k.width());var p=Math.floor(k.height())}var s=h.attribute("mask").value;h.attribute("mask").value="";var m=document.createElement("canvas");m.width=o+f;m.height=n+p;var r=m.getContext("2d");this.renderChildren(r);var l=document.createElement("canvas");l.width=o+f;l.height=n+p;var g=l.getContext("2d");h.render(g);g.globalCompositeOperation="destination-in";g.fillStyle=r.createPattern(m,"no-repeat");g.fillRect(0,0,o+f,n+p);q.fillStyle=g.createPattern(l,"no-repeat");q.fillRect(0,0,o+f,n+p);h.attribute("mask").value=s};this.render=function(f){}};c.Element.mask.prototype=new c.Element.ElementBase;c.Element.clipPath=function(e){this.base=c.Element.ElementBase;this.base(e);this.apply=function(f){var k=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var j=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){};k.call(f);for(var h=0;h<this.children.length;h++){var l=this.children[h];if(typeof(l.path)!="undefined"){var g=null;if(l.attribute("transform").hasValue()){g=new c.Transform(l.attribute("transform").value);g.apply(f)}l.path(f);CanvasRenderingContext2D.prototype.closePath=j;if(g){g.unapply(f)}}}j.call(f);f.clip();CanvasRenderingContext2D.prototype.beginPath=k;CanvasRenderingContext2D.prototype.closePath=j};this.render=function(f){}};c.Element.clipPath.prototype=new c.Element.ElementBase;c.Element.filter=function(e){this.base=c.Element.ElementBase;this.base(e);this.apply=function(t,l){var m=l.getBoundingBox();var q=Math.floor(m.x1);var o=Math.floor(m.y1);var g=Math.floor(m.width());var s=Math.floor(m.height());var h=l.style("filter").value;l.style("filter").value="";var r=0,p=0;for(var k=0;k<this.children.length;k++){var f=this.children[k].extraFilterDistance||0;r=Math.max(r,f);p=Math.max(p,f)}var n=document.createElement("canvas");n.width=g+2*r;n.height=s+2*p;var j=n.getContext("2d");j.translate(-q+r,-o+p);l.render(j);for(var k=0;k<this.children.length;k++){this.children[k].apply(j,0,0,g+2*r,s+2*p)}t.drawImage(n,0,0,g+2*r,s+2*p,q-r,o-p,g+2*r,s+2*p);l.style("filter",true).value=h};this.render=function(f){}};c.Element.filter.prototype=new c.Element.ElementBase;c.Element.feMorphology=function(e){this.base=c.Element.ElementBase;this.base(e);this.apply=function(h,g,k,j,f){}};c.Element.feMorphology.prototype=new c.Element.ElementBase;c.Element.feComposite=function(e){this.base=c.Element.ElementBase;this.base(e);this.apply=function(h,g,k,j,f){}};c.Element.feComposite.prototype=new c.Element.ElementBase;c.Element.feColorMatrix=function(l){this.base=c.Element.ElementBase;this.base(l);var h=c.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var k=h[0];h=[0.213+0.787*k,0.715-0.715*k,0.072-0.072*k,0,0,0.213-0.213*k,0.715+0.285*k,0.072-0.072*k,0,0,0.213-0.213*k,0.715-0.715*k,0.072+0.928*k,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var g=h[0]*Math.PI/180;var n=function(p,o,m){return p+Math.cos(g)*o+Math.sin(g)*m};h=[n(0.213,0.787,-0.213),n(0.715,-0.715,-0.715),n(0.072,-0.072,0.928),0,0,n(0.213,-0.213,0.143),n(0.715,0.285,0.14),n(0.072,-0.072,-0.283),0,0,n(0.213,-0.213,-0.787),n(0.715,-0.715,0.715),n(0.072,0.928,0.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0,1];break}function j(p,o,s,r,m,q){return p[s*r*4+o*4+q]}function f(p,o,t,r,m,q,s){p[t*r*4+o*4+q]=s}function e(p,o){var m=h[p];return m*(m<0?o-255:o)}this.apply=function(z,v,t,o,w){var q=z.getImageData(0,0,o,w);for(var t=0;t<w;t++){for(var v=0;v<o;v++){var m=j(q.data,v,t,o,w,0);var p=j(q.data,v,t,o,w,1);var s=j(q.data,v,t,o,w,2);var u=j(q.data,v,t,o,w,3);f(q.data,v,t,o,w,0,e(0,m)+e(1,p)+e(2,s)+e(3,u)+e(4,1));f(q.data,v,t,o,w,1,e(5,m)+e(6,p)+e(7,s)+e(8,u)+e(9,1));f(q.data,v,t,o,w,2,e(10,m)+e(11,p)+e(12,s)+e(13,u)+e(14,1));f(q.data,v,t,o,w,3,e(15,m)+e(16,p)+e(17,s)+e(18,u)+e(19,1))}}z.clearRect(0,0,o,w);z.putImageData(q,0,0)}};c.Element.feColorMatrix.prototype=new c.Element.ElementBase;c.Element.feGaussianBlur=function(e){this.base=c.Element.ElementBase;this.base(e);this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());this.extraFilterDistance=this.blurRadius;this.apply=function(h,g,k,j,f){if(typeof(stackBlurCanvasRGBA)=="undefined"){c.log("ERROR: StackBlur.js must be included for blur to work");return}h.canvas.id=c.UniqueId();h.canvas.style.display="none";document.body.appendChild(h.canvas);stackBlurCanvasRGBA(h.canvas.id,g,k,j,f,this.blurRadius);document.body.removeChild(h.canvas)}};c.Element.feGaussianBlur.prototype=new c.Element.ElementBase;c.Element.title=function(e){};c.Element.title.prototype=new c.Element.ElementBase;c.Element.desc=function(e){};c.Element.desc.prototype=new c.Element.ElementBase;c.Element.MISSING=function(e){c.log("ERROR: Element '"+e.nodeName+"' not yet implemented.")};c.Element.MISSING.prototype=new c.Element.ElementBase;c.CreateElement=function(g){var f=g.nodeName.replace(/^[^:]+:/,"");f=f.replace(/\-/g,"");var h=null;if(typeof(c.Element[f])!="undefined"){h=new c.Element[f](g)}else{h=new c.Element.MISSING(g)}h.type=g.nodeName;return h};c.load=function(e,f){c.loadXml(e,c.ajax(f))};c.loadXml=function(e,f){c.loadXmlDoc(e,c.parseXml(f))};c.loadXmlDoc=function(j,m){c.init(j);var h=function(o){var n=j.canvas;while(n){o.x-=n.offsetLeft;o.y-=n.offsetTop;n=n.offsetParent}if(window.scrollX){o.x+=window.scrollX}if(window.scrollY){o.y+=window.scrollY}return o};if(c.opts.ignoreMouse!=true){j.canvas.onclick=function(o){var n=h(new c.Point(o!=null?o.clientX:event.clientX,o!=null?o.clientY:event.clientY));c.Mouse.onclick(n.x,n.y)};j.canvas.onmousemove=function(o){var n=h(new c.Point(o!=null?o.clientX:event.clientX,o!=null?o.clientY:event.clientY));c.Mouse.onmousemove(n.x,n.y)}}var l=c.CreateElement(m.documentElement);l.root=true;var k=true;var g=function(){c.ViewPort.Clear();if(j.canvas.parentNode){c.ViewPort.SetCurrent(j.canvas.parentNode.clientWidth,j.canvas.parentNode.clientHeight)}if(c.opts.ignoreDimensions!=true){if(l.style("width").hasValue()){j.canvas.width=l.style("width").toPixels("x");j.canvas.style.width=j.canvas.width+"px"}if(l.style("height").hasValue()){j.canvas.height=l.style("height").toPixels("y");j.canvas.style.height=j.canvas.height+"px"}}var o=j.canvas.clientWidth||j.canvas.width;var n=j.canvas.clientHeight||j.canvas.height;if(c.opts.ignoreDimensions==true&&l.style("width").hasValue()&&l.style("height").hasValue()){o=l.style("width").toPixels("x");n=l.style("height").toPixels("y")}c.ViewPort.SetCurrent(o,n);if(c.opts.offsetX!=null){l.attribute("x",true).value=c.opts.offsetX}if(c.opts.offsetY!=null){l.attribute("y",true).value=c.opts.offsetY}if(c.opts.scaleWidth!=null||c.opts.scaleHeight!=null){var p=null,e=null,q=c.ToNumberArray(l.attribute("viewBox").value);if(c.opts.scaleWidth!=null){if(l.attribute("width").hasValue()){p=l.attribute("width").toPixels("x")/c.opts.scaleWidth}else{if(!isNaN(q[2])){p=q[2]/c.opts.scaleWidth}}}if(c.opts.scaleHeight!=null){if(l.attribute("height").hasValue()){e=l.attribute("height").toPixels("y")/c.opts.scaleHeight}else{if(!isNaN(q[3])){e=q[3]/c.opts.scaleHeight}}}if(p==null){p=e}if(e==null){e=p}l.attribute("width",true).value=c.opts.scaleWidth;l.attribute("height",true).value=c.opts.scaleHeight;l.attribute("transform",true).value+=" scale("+(1/p)+","+(1/e)+")"}if(c.opts.ignoreClear!=true){j.clearRect(0,0,o,n)}l.render(j);if(k){k=false;if(typeof(c.opts.renderCallback)=="function"){c.opts.renderCallback(m)}}};var f=true;if(c.ImagesLoaded()){f=false;g()}c.intervalID=setInterval(function(){var n=false;if(f&&c.ImagesLoaded()){f=false;n=true}if(c.opts.ignoreMouse!=true){n=n|c.Mouse.hasEvents()}if(c.opts.ignoreAnimation!=true){for(var e=0;e<c.Animations.length;e++){n=n|c.Animations[e].update(1000/c.FRAMERATE)}}if(typeof(c.opts.forceRedraw)=="function"){if(c.opts.forceRedraw()==true){n=true}}if(n){g();c.Mouse.runEvents()}},1000/c.FRAMERATE)};c.stop=function(){if(c.intervalID){clearInterval(c.intervalID)}};c.Mouse=new (function(){this.events=[];this.hasEvents=function(){return this.events.length!=0};this.onclick=function(e,f){this.events.push({type:"onclick",x:e,y:f,run:function(g){if(g.onclick){g.onclick()}}})};this.onmousemove=function(e,f){this.events.push({type:"onmousemove",x:e,y:f,run:function(g){if(g.onmousemove){g.onmousemove()}}})};this.eventElements=[];this.checkPath=function(h,f){for(var g=0;g<this.events.length;g++){var j=this.events[g];if(f.isPointInPath&&f.isPointInPath(j.x,j.y)){this.eventElements[g]=h}}};this.checkBoundingBox=function(g,j){for(var f=0;f<this.events.length;f++){var h=this.events[f];if(j.isPointInBox(h.x,h.y)){this.eventElements[f]=g}}};this.runEvents=function(){c.ctx.canvas.style.cursor="";for(var g=0;g<this.events.length;g++){var h=this.events[g];var f=this.eventElements[g];while(f){h.run(f);f=f.parent}}this.events=[];this.eventElements=[]}});return c}})();if(typeof(CanvasRenderingContext2D)!="undefined"){CanvasRenderingContext2D.prototype.drawSvg=function(d,b,a,c,e){canvg(this.canvas,d,{ignoreMouse:true,ignoreAnimation:true,ignoreDimensions:true,ignoreClear:true,offsetX:b,offsetY:a,scaleWidth:c,scaleHeight:e})}};